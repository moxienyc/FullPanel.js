/*! fullpanel - v0.0.1 - 2015-01-14
* https://github.com/jeffreynolte/fullpaneljs
* Copyright (c) 2015 Jeffrey Nolte; Licensed MIT */
!function(a){"use strict";a.fn.fullpanel=function(b){function c(){a("body").append('<div id="fp-nav"><ul></ul></div>'),J=a("#fp-nav");for(var c=0;c<a(".fp-section").length;c++){var d="";b.anchors.length&&(d=b.anchors[c]);var e='<li><a href="#'+d+'"><span></span></a></li>';J.find("ul").append(e)}}function d(a,b){return parseInt(a-b)}function e(c,e){var g=c.position;if(b.menu&&w(c.attr("data-anchor"),d(c.siblings().length,c.index)),"undefined"==typeof g)return!1;var h={element:c,callback:e,destination:g,anchorLink:c.data("anchor"),sectionIndex:c.index(".fp-section"),activeSection:a(".fp-section.active"),leavingSection:a(".fp-section.active").index(".fp-section")+1,localIsResizing:M};c.addClass("active"),c.siblings().removeClass("active"),L=!0,x(h.anchorLink,h.sectionIndex),"function"!=typeof b.onLeave||h.localIsResizing||b.onLeave(h.leavingSection,h.sectionIndex+1),f(h),I=h.anchorLink}function f(c){b.css3?setTimeout(function(){p(c)},b.scrollingSpeed):a(c.element).fadeIn("slow").promise().done(function(){p(c)})}function g(){document.addEventListener?(document.addEventListener("mousewheel",k,!1),document.addEventListener("wheel",k,!1)):document.attachEvent("onmousewheel",k)}function h(){document.addEventListener?(document.removeEventListener("mousewheel",k,!1),document.removeEventListener("wheel",k,!1)):document.detachEvent("onmousewheel",k)}function i(c){var d=c.originalEvent;b.autoScrolling&&!b.scrollBar&&c.preventDefault();a(".fp-section.active");if(!L){var e=o(d);G=e.y,H=e.x,b.autoScrolling&&!b.scrollBar&&Math.abs(E-G)>a(window).height()/100*b.touchSensitivity&&(E>G?z("down"):G>E&&z("up"))}}function j(a){var b=a.originalEvent,c=o(b);E=c.y,F=c.x}function k(b){b=window.event||b;var c=Math.max(-1,Math.min(1,b.wheelDelta||-b.deltaY||-b.detail));return L||(0>c?a.fn.fullpanel.moveSectionForward():a.fn.fullpanel.moveSectionBackward()),!1}function l(){if(C||D){var b=n();a(document).off("touchstart "+b.down).on("touchstart "+b.down,j),a(document).off("touchmove "+b.move).on("touchmove "+b.move,i)}}function m(){(C||D)&&(MSPointer=n(),a(document).off("touchstart "+MSPointer.down),a(document).off("touchmove "+MSPointer.move))}function n(){var a;return a=window.PointerEvent?{down:"pointerdown",move:"pointermove"}:{down:"MSPointerDown",move:"MSPointerMove"}}function o(a){var b=[];return b.y="undefined"!=typeof a.pageY&&(a.pageY||a.pageX)?a.pageY:a.touches[0].pageY,b.x="undefined"!=typeof a.pageX&&(a.pageY||a.pageX)?a.pageX:a.touches[0].pageX,b}function p(a){"function"!=typeof b.afterLoad||a.localIsResizing||b.afterLoad(a.anchorLink,a.sectionIndex+1),setTimeout(function(){L=!1,"function"==typeof a.callback&&a.callback()},B)}function q(){a(".fp-section").each(function(){var b=a(this),c=window.innerHeight,d=window.innerWidth;b.css("height",c+"px"),b.css("width",d+"px"),b.next().length<0&&(b.parent.css("height",c+"px"),b.parent.css("height",d+"px"))})}function r(){var b=window.location.hash.replace("#","").split("/"),c=b[0];c&&a.fn.fullpanel.moveToSection(c)}function s(){var b=window.location.hash.replace("#","").split("/"),c=b[0];c.length&&a.fn.fullpanel.moveToSection(c)}function t(){clearTimeout(R),R=setTimeout(function(){a.fn.fullpanel.reBuild(!0)},500)}function u(c,d){var e=a("#fp-nav");b.navigation&&(e.find("a.active").removeClass("active"),c?e.find('a[href="#'+c+'"]').addClass("active"):e.find("li").eq(d).find("a").addClass("active"))}function v(c){b.menu&&(a(b.menu).find(".active").removeClass("active"),a(b.menu).find('[data-menuanchor="'+c+'"]').addClass("active"))}function w(a,b){v(a),u(a,b)}function x(a,c){location.hash=a,A(b.anchors.length?location.hash:String(c))}function y(b,c){switch(c){case"up":Q.up=b;break;case"down":Q.down=b;break;case"left":Q.left=b;break;case"right":Q.right=b;break;case"all":a.fn.fullpage.setAllowScrolling(b)}}function z(b){Q[b]&&("up"===b?a.fn.fullpanel.moveSectionBackward():a.fn.fullpanel.moveSectionForward())}function A(a){a=a.replace("/","-").replace("#",""),N[0].className=N[0].className.replace(/\b\s?fp-viewing-[^\s]+\b/g,""),N.addClass("fp-viewing-"+a)}b=a.extend({menu:!1,anchors:[],navigation:!1,css3:!0,scrollingSpeed:700,autoScrolling:!0,easing:"easeInQuart",scrollBar:!1,resize:!0,normalScrollElements:null,touchSensitivity:5,sectionSelector:".panel",afterLoad:null,onLeave:null,afterRender:null,afterResize:null,afterRebuild:null,afterSlideLoad:null,onSlideLeave:null},b),a.extend(a.easing,{easeInQuart:function(a,b,c,d,e){return d*(b/=e)*b*b*b+c}});var B=600,C=navigator.userAgent.match(/(iPhone|iPod|iPad|Android|BlackBerry|BB10|Windows Phone|Tizen|Bada)/),D="ontouchstart"in window||navigator.msMaxTouchPoints>0||navigator.maxTouchPoints,E=0,F=0,G=0,H=0;a.fn.fullpanel.setScrollingSpeed=function(a){b.scrollingSpeed=a},a.fn.fullpanel.setAllowScrolling=function(b,c){"undefined"!=typeof c?(c=c.replace(" ","").split(","),a.each(c,function(a,c){y(b,c)})):b?(a.fn.fullpanel.setMouseWheelScrolling(!0),l()):(a.fn.fullpanel.setMouseWheelScrolling(!1),m())},a.fn.fullpanel.setMouseWheelScrolling=function(a){a?g():h()},a.fn.fullpanel.moveSectionForward=function(){var b=a(".fp-section.active"),c=a(".fp-section").eq(b.prev().index());return 0===b.prev().length?!1:void e(c)},a.fn.fullpanel.moveSectionBackward=function(){var b=a(".fp-section.active"),c=a(".fp-section").eq(b.next().index());return 0===b.next().length?!1:void e(c)},a.fn.fullpanel.moveToSection=function(b){var c="";isNaN(b)?c=a('[data-anchor="'+b+'"]'):(b=a(".panel").length-b,c=a(".fp-section").eq(b)),e(c)},a.fn.fullpanel.reBuild=function(a){M=!0,q(),M=!1,"function"==typeof b.afterRebuild&&a&&b.afterRebuild()};var I,J,K=a(this),L=!1,M=!1,N=a("body"),O="fullpanel-wrapper",P=a(".fp-section"),Q={up:!0,down:!0,left:!0,right:!0};a.fn.fullpanel.setAllowScrolling(!0),a(b.sectionSelector).each(function(){a(this).addClass("fp-section")}),K.length?(K.addClass(O),K.append(K.children().get().reverse())):window.alert("Error, Fullpanel.js needs to be initialized with a selector"),P.each(function(c){var d=a(this);c||0!==a(".active",P).length||d.addClass("active"),"undefined"!=typeof b.anchors[c]&&d.attr("data-anchor",b.anchors[c])}).promise().done(function(){"function"==typeof b.afterRender&&b.afterRender();var d=window.location.hash.replace("#","").split("/"),f=d[0];if(b.navigation&&c(),f.length){var h=a('[data-anchor="'+f+'"]');A(f),e(h),"function"==typeof b.afterLoad&&b.afterLoad(f,h.index(".fp-section")+1),h.addClass("active").siblings().removeClass("active")}q(),g(),a(window).on("load",function(){r()})}),a(window).on("hashchange",s),a(document).on("click touchstart","#fp-nav a",function(b){b.preventDefault();var c=a(this),f=c.parent().index(),g=d(c.parent().siblings().length,f);e(a(".fp-section").eq(g))}),b.normalScrollElements&&(a(document).on("mouseenter",b.normalScrollElements,function(){a.fn.fullpage.setMouseWheelScrolling(!1)}),a(document).on("mouseleave",b.normalScrollElements,function(){a.fn.fullpage.setMouseWheelScrolling(!0)}));var R;a(window).resize(t)}}(jQuery);