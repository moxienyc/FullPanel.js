/*! fullpanel - v0.0.1 - 2014-12-17
* https://github.com/jeffreynolte/fullpaneljs
* Copyright (c) 2014 Jeffrey Nolte; Licensed MIT */
!function(a){"use strict";a.fn.fullpanel=function(b){function c(){a("body").append('<div id="fp-nav"><ul></ul></div>'),t=a("#fp-nav");for(var c=0;c<a(".fp-section").length;c++){var d="";b.anchors.length&&(d=b.anchors[c]);var e='<li><a href="#'+d+'"><span></span></a></li>';t.find("ul").append(e)}}function d(a,b){return parseInt(a-b)}function e(c,e){var g=c.position;if(b.menu&&o(c.attr("data-anchor"),d(c.siblings().length,c.index)),"undefined"==typeof g)return!1;var h={element:c,callback:e,destination:g,anchorLink:c.data("anchor"),sectionIndex:c.index(".fp-section"),activeSection:a(".fp-section.active"),leavingSection:a(".fp-section.active").index(".fp-section")+1,localIsResizing:w};c.addClass("active"),c.siblings().removeClass("active"),v=!0,p(h.anchorLink,h.sectionIndex),"function"!=typeof b.onLeave||h.localIsResizing||b.onLeave(h.leavingSection,h.sectionIndex+1),f(h),s=h.anchorLink}function f(c){b.css3?setTimeout(function(){h(c)},b.scrollingSpeed):a(c.element).fadeIn("slow").promise().done(function(){h(c)})}function g(b){b=window.event||b;var c=Math.max(-1,Math.min(1,b.wheelDelta||-b.deltaY||-b.detail));return v||(0>c?a.fn.fullpanel.moveSectionForward():a.fn.fullpanel.moveSectionBackward()),document.addEventListener?(document.addEventListener("mousewheel",g,!1),document.addEventListener("wheel",g,!1)):document.attachEvent("wheel",g),!1}function h(a){"function"!=typeof b.afterLoad||a.localIsResizing||b.afterLoad(a.anchorLink,a.sectionIndex+1),setTimeout(function(){v=!1,"function"==typeof a.callback&&a.callback()},r)}function i(){a(".fp-section").each(function(){var b=a(this),c=window.innerHeight,d=window.innerWidth;b.css("height",c+"px"),b.css("width",d+"px"),b.next().length<0&&(b.parent.css("height",c+"px"),b.parent.css("height",d+"px"))})}function j(){var b=window.location.hash.replace("#","").split("/"),c=b[0];c&&a.fn.fullpanel.moveToSection(c)}function k(){var b=window.location.hash.replace("#","").split("/"),c=b[0];c.length&&a.fn.fullpanel.moveToSection(c)}function l(){clearTimeout(B),B=setTimeout(function(){a.fn.fullpanel.reBuild(!0)},500)}function m(c,d){var e=a("#fp-nav");b.navigation&&(e.find("a.active").removeClass("active"),c?e.find('a[href="#'+c+'"]').addClass("active"):e.find("li").eq(d).find("a").addClass("active"))}function n(c){b.menu&&(a(b.menu).find(".active").removeClass("active"),a(b.menu).find('[data-menuanchor="'+c+'"]').addClass("active"))}function o(a,b){n(a),m(a,b)}function p(a,c){location.hash=a,q(b.anchors.length?location.hash:String(c))}function q(a){a=a.replace("/","-").replace("#",""),x[0].className=x[0].className.replace(/\b\s?fp-viewing-[^\s]+\b/g,""),x.addClass("fp-viewing-"+a)}b=a.extend({menu:!1,anchors:[],navigation:!1,css3:!0,scrollingSpeed:700,easing:"easeInQuart",resize:!0,sectionSelector:".panel",afterLoad:null,onLeave:null,afterRender:null,afterResize:null,afterRebuild:null,afterSlideLoad:null,onSlideLeave:null},b),a.extend(a.easing,{easeInQuart:function(a,b,c,d,e){return d*(b/=e)*b*b*b+c}});var r=600;a.fn.fullpanel.moveSectionForward=function(){var b=a(".fp-section.active"),c=a(".fp-section").eq(b.prev().index());return 0===b.prev().length?!1:void e(c)},a.fn.fullpanel.moveSectionBackward=function(){var b=a(".fp-section.active"),c=a(".fp-section").eq(b.next().index());return 0===b.next().length?!1:void e(c)},a.fn.fullpanel.moveToSection=function(b){var c="";isNaN(b)?c=a('[data-anchor="'+b+'"]'):(b=a(".panel").length-b,c=a(".fp-section").eq(b)),e(c)},a.fn.fullpanel.reBuild=function(a){w=!0,i(),w=!1,"function"==typeof b.afterRebuild&&a&&b.afterRebuild()};var s,t,u=a(this),v=!1,w=!1,x=a("body"),y="fullpanel-wrapper",z=a(this),A=a(".fp-section");a(b.sectionSelector).each(function(){a(this).addClass("fp-section")}),z.length?(u.addClass(y),u.append(u.children().get().reverse())):window.alert("Error, Fullpanel.js needs to be initialized with a selector"),A.each(function(c){var d=a(this);c||0!==a(".active",A).length||d.addClass("active"),"undefined"!=typeof b.anchors[c]&&d.attr("data-anchor",b.anchors[c])}).promise().done(function(){"function"==typeof b.afterRender&&b.afterRender();var d=window.location.hash.replace("#","").split("/"),f=d[0];if(b.navigation&&c(),f.length){var h=a('[data-anchor="'+f+'"]');q(f),e(h),"function"==typeof b.afterLoad&&b.afterLoad(f,h.index(".fp-section")+1),h.addClass("active").siblings().removeClass("active")}i(),g(),a(window).on("load",function(){j()})}),a(window).on("hashchange",k),a(document).on("click touchstart","#fp-nav a",function(b){b.preventDefault();var c=a(this),f=c.parent().index(),g=d(c.parent().siblings().length,f);e(a(".fp-section").eq(g))});var B;a(window).resize(l)}}(jQuery);